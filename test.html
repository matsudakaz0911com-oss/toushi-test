<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>資産運用・NISA 習得テスト</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --accent-color: #3498db;
            --success-color: #27ae60;
            --error-color: #e74c3c;
            --bg-color: #f4f7f6;
        }

        body {
            font-family: "Helvetica Neue", Arial, "Hiragino Kaku Gothic ProN", "Hiragino Sans", Meiryo, sans-serif;
            background-color: var(--bg-color);
            color: var(--primary-color);
            line-height: 1.6;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        h1 {
            text-align: center;
            color: var(--primary-color);
            border-bottom: 3px solid var(--accent-color);
            padding-bottom: 10px;
        }

        .quiz-info {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-weight: bold;
            text-align: center;
            border: 1px solid #bbdefb;
        }

        .question-card {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #fff;
        }

        .question-text {
            font-size: 1.1em;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .option-item {
            margin-bottom: 10px;
        }

        label {
            display: block;
            padding: 12px;
            background: #fdfdfd;
            border: 1px solid #eee;
            border-radius: 5px;
            cursor: pointer;
            transition: 0.2s;
        }

        label:hover {
            background: #f1f1f1;
        }

        input[type="radio"] {
            margin-right: 10px;
        }

        .btn-container {
            text-align: center;
            margin-top: 30px;
        }

        button {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 15px 50px;
            font-size: 1.2em;
            border-radius: 30px;
            cursor: pointer;
            font-weight: bold;
        }

        button:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }

        #result {
            display: none;
            margin-top: 30px;
            padding: 25px;
            border-radius: 8px;
            text-align: center;
            font-size: 1.2em;
        }

        .pass { background-color: #d4edda; color: #155724; border: 2px solid #c3e6cb; }
        .fail { background-color: #f8d7da; color: #721c24; border: 2px solid #f5c6cb; }

        .explanation {
            display: none;
            margin-top: 15px;
            padding: 15px;
            background: #fff9c4;
            border-left: 5px solid #fbc02d;
            font-size: 0.95em;
            text-align: left;
        }

        .answer-label { font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <h1>習得確認テスト</h1>
    
    <div class="quiz-info">
        全29問からランダムに15問出題されます。<br>
        15問中12問以上の正解（80点以上）で合格です！
    </div>

    <form id="quiz-form">
        <div id="quiz-container"></div>
        
        <div class="btn-container">
            <button type="button" onclick="calculateScore()">回答を提出する</button>
        </div>
    </form>

    <div id="result">
        <h2 id="result-score"></h2>
        <p id="result-message"></p>
        <button type="button" onclick="location.reload()" style="background-color: var(--primary-color);">もう一度挑戦する</button>
    </div>
</div>

<script>
const allQuestions = [
    // --- 第1回提供分 ---
    { q: "S&P 500とはどのような指数ですか？", a: ["日本、アメリカ、世界のIT企業からなる指数", "アメリカの時価総額の大きい主要500社の株価指数", "全世界のIT企業500社の株価指数"], ans: 1, ex: "S&P 500は、アメリカの主要500社の時価総額に基づいた指数です。" },
    { q: "S&P 500に何年以上投資すればプラス収益になる確率がほぼ100%ですか？", a: ["5年以上", "10年以上", "15年以上"], ans: 2, ex: "過去のデータでは15年以上の保有でマイナスになったことはありません。" },
    { q: "ウォーレン・バフェットが家族に推奨している指数は何ですか？", a: ["日経平均", "S&P 500", "ナスダック"], ans: 1, ex: "バフェットは遺言で資産の90%をS&P 500に投資するよう勧めています。" },
    { q: "アメリカ株への投資が推奨される理由の一つは？", a: ["人口が増加していく先進国だから", "税金が世界一安いから", "法律で株価の下落が禁じられているから"], ans: 0, ex: "人口増加は経済成長の強いエンジンになります。" },
    { q: "eMAXIS Slim 米国株式（S&P 500）の信託報酬（100万円預けた場合）は？", a: ["約9,000円", "約900円", "約90円"], ans: 1, ex: "年率約0.093%のため、100万円で年間約900円程度です。" },
    { q: "全世界株式（オルカン）一本で、世界の市場の約何%をカバーできますか？", a: ["約50%", "約85%", "約100%"], ans: 1, ex: "オルカンは約2,900社、市場の約85%を網羅します。" },
    { q: "「全世界株式（オルカン）」のうち、アメリカが占める割合は？", a: ["約30%", "約60%", "約90%"], ans: 1, ex: "時価総額ベースで約6割がアメリカです。" },
    { q: "投資信託の「信託報酬」はいつ支払われますか？", a: ["購入時に一括", "年に一度振込", "毎日資産から差し引かれる"], ans: 2, ex: "信託報酬は日々、運用資産から自動的に引かれています。" },
    { q: "オルカンのメリット「新陳代謝システム」とは？", a: ["成長企業の割合を自動で増やし、低迷企業を減らす", "全銘柄を定期的に買い替える", "AIが将来を予想して買う"], ans: 0, ex: "時価総額の変化に合わせて保有比率が自動調整されます。" },
    { q: "指数に連動した成果を目指す投資手法を何と呼びますか？", a: ["アクティブ投資", "インデックス投資", "デイトレード"], ans: 1, ex: "指標（インデックス）と同じ動きを目指す手法です。" },
    { q: "アクティブファンドが長期でインデックスに勝てる確率は？", a: ["約1割", "約5割", "約9割"], ans: 0, ex: "15年以上の長期では約9割のアクティブファンドが負けています。" },
    { q: "毎月同じ金額を購入する手法を何と言いますか？", a: ["ドルコスト平均法", "複利運用", "損切り"], ans: 0, ex: "定額購入で平均購入単価を平準化する手法です。" },
    { q: "株式投資の「常識的な利回り」は年利何%前後？", a: ["1〜2%", "3〜9%", "20〜30%"], ans: 1, ex: "米国株で7-9%程度が歴史的な平均です。" },
    { q: "新NISAの「生涯投資枠」は最大いくら？", a: ["800万円", "1,200万円", "1,800万円"], ans: 2, ex: "一人あたり合計1,800万円が上限です。" },
    { q: "生涯投資枠のうち「成長投資枠」は最大いくら？", a: ["600万円", "1,200万円", "1,800万円"], ans: 1, ex: "1,800万円のうち成長枠は1,200万円まで利用可能です。" },
    { q: "新NISAで年間に投資できる上限額は？", a: ["120万円", "240万円", "360万円"], ans: 2, ex: "つみたて120万＋成長240万＝年間360万円です。" },
    { q: "新NISAの非課税期間はどうなっていますか？", a: ["20年間", "無期限", "50年間"], ans: 1, ex: "新NISAは期限なく非課税で保有できます。" },
    { q: "新NISAで売却した枠はどうなりますか？", a: ["消滅する", "翌年以降に再利用可能", "即日復活する"], ans: 1, ex: "売却した「簿価」分の枠が翌年復活します。" },
    { q: "非課税枠の管理は何で行われますか？", a: ["時価", "簿価（取得価額）", "売却価格"], ans: 1, ex: "購入時の金額（簿価）で1,800万円を管理します。" },
    { q: "NISA内で損が出た場合、他口座と損益通算できますか？", a: ["できる", "できない", "10万円まで可能"], ans: 1, ex: "NISAは損益通算や繰越控除の対象外です。" },
    { q: "新NISAを最短何年で埋めることができますか？", a: ["1年", "5年", "10年"], ans: 1, ex: "360万円×5年で1,800万円となります。" },
    { q: "NISAとiDeCo、どちらの優先順位が高いとされていますか？", a: ["iDeCo", "NISA", "どちらでも同じ"], ans: 1, ex: "引き出し制限のないNISAを優先するのが一般的です。" },

    // --- 今回追加分 (Q23-Q29) ---
    { q: "インデックスファンドとは何を目指す投資信託？", a: ["市場平均を上回る成果", "市場平均と同じ値動き", "元本保証"], ans: 1, ex: "インデックスファンドは市場平均（指数）に連動することを目指す。勝とうとするのではなく、ついていく。" },
    { q: "インデックスファンドが長期投資と相性が良い理由は？", a: ["常に値上がりするから", "広く分散されているから", "高配当だから"], ans: 1, ex: "1社ではなく市場全体に分散されているため、個別企業の倒産リスクを抑えられる。" },
    { q: "インデックスファンドの一般的な特徴は？", a: ["手数料が比較的低い", "短期で大きく儲かる", "値動きがほぼない"], ans: 0, ex: "アクティブ運用より運用コストが低いことが多い。長期ではコスト差が大きな差になる。" },
    { q: "市場全体が成長すれば、インデックスファンドはどうなる？", a: ["必ず下がる", "一緒に成長しやすい", "変わらない"], ans: 1, ex: "指数に連動するため、経済成長の恩恵を受けやすい。" },
    { q: "インデックスファンドに投資する意味として最も近いものは？", a: ["1社に集中投資すること", "経済全体に投資すること", "短期売買で利益を狙うこと"], ans: 1, ex: "インデックス投資は「企業を選ぶ」のではなく「経済全体を買う」発想。" },
    { q: "インデックス投資の弱点は？", a: ["市場が下落すれば一緒に下がる", "分散できない", "手数料が非常に高い"], ans: 0, ex: "市場平均に連動するため、暴落時は避けられない。ただし長期前提で考える。" },
    { q: "アクティブファンドとの違いとして正しいものは？", a: ["インデックスは市場を上回ることを目指す", "アクティブは市場平均を目指す", "アクティブは市場を上回ることを目指す"], ans: 2, ex: "アクティブは「勝ちにいく運用」。その分コストが高くなる傾向がある。" }
];

let currentQuestions = [];

function startQuiz() {
    // 全問からランダムに15問抽出
    const shuffled = [...allQuestions].sort(() => 0.5 - Math.random());
    currentQuestions = shuffled.slice(0, 15);

    const container = document.getElementById('quiz-container');
    container.innerHTML = '';

    currentQuestions.forEach((q, index) => {
        const card = document.createElement('div');
        card.className = 'question-card';
        card.id = `q-card-${index}`;

        let optionsHtml = '';
        q.a.forEach((opt, optIndex) => {
            optionsHtml += `
                <div class="option-item">
                    <label>
                        <input type="radio" name="question${index}" value="${optIndex}">
                        ${['A', 'B', 'C'][optIndex]}. ${opt}
                    </label>
                </div>
            `;
        });

        card.innerHTML = `
            <div class="question-text">Q${index + 1}. ${q.q}</div>
            <div class="options-list">${optionsHtml}</div>
            <div id="explanation-${index}" class="explanation">
                <span class="answer-label">正解：${['A', 'B', 'C'][q.ans]}</span><br>
                <strong>【解説】</strong> ${q.ex}
            </div>
        `;
        container.appendChild(card);
    });
}

function calculateScore() {
    let correctCount = 0;
    const form = document.getElementById('quiz-form');
    
    currentQuestions.forEach((q, index) => {
        const selected = form.querySelector(`input[name="question${index}"]:checked`);
        const card = document.getElementById(`q-card-${index}`);
        const exp = document.getElementById(`explanation-${index}`);
        
        exp.style.display = 'block';
        
        if (selected && parseInt(selected.value) === q.ans) {
            correctCount++;
            card.style.border = '2px solid var(--success-color)';
            card.style.backgroundColor = '#f0fff4';
        } else {
            card.style.border = '2px solid var(--error-color)';
            card.style.backgroundColor = '#fff5f5';
        }
    });

    const finalScore = Math.round((correctCount / 15) * 100);
    const resultDiv = document.getElementById('result');
    const scoreTitle = document.getElementById('result-score');
    const resultMsg = document.getElementById('result-message');

    scoreTitle.innerText = `得点：${finalScore}点 （${correctCount}問正解 / 15問中）`;
    resultDiv.style.display = 'block';

    if (finalScore >= 80) {
        resultDiv.className = 'pass';
        resultMsg.innerText = "合格です！おめでとうございます！";
    } else {
        resultDiv.className = 'fail';
        resultMsg.innerText = "不合格です。合格には80点（12問正解）以上が必要です。";
    }

    window.scrollTo({ top: resultDiv.offsetTop - 20, behavior: 'smooth' });
}

startQuiz();
</script>

</body>
</html>